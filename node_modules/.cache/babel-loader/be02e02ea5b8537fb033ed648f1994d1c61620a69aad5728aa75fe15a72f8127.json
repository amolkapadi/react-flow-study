{"ast":null,"code":"var _jsxFileName = \"D:\\\\ReactFlow\\\\my-app\\\\src\\\\ProDnd\\\\ProDndFlow.js\",\n  _s = $RefreshSig$();\nimport React, { DragEvent, useCallback, useRef } from 'react';\nimport ReactFlow, { Node, ReactFlowProvider, Controls, useReactFlow } from 'reactflow';\nimport Sidebar from './Sidebar';\nimport useNodesStateSynced, { nodesMap } from './useNodesStateSynced';\nimport useEdgesStateSynced from './useEdgesStateSynced';\nimport 'reactflow/dist/style.css';\nimport styles from './style.css';\n\n/**\r\n * This example shows how you can use yjs to sync the nodes and edges between multiple users.\r\n */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst proOptions = {\n  account: 'paid-pro',\n  hideAttribution: true\n};\nconst getId = () => `dndnode_${Math.random() * 10000}`;\nconst onDragOver = event => {\n  event.preventDefault();\n  event.dataTransfer.dropEffect = 'move';\n};\nfunction ReactFlowPro() {\n  _s();\n  const wrapperRef = useRef < HTMLDivElement > null;\n  const [nodes, onNodesChange] = useNodesStateSynced();\n  const [edges, onEdgesChange, onConnect] = useEdgesStateSynced();\n  const {\n    project\n  } = useReactFlow();\n  const onDrop = event => {\n    event.preventDefault();\n    if (wrapperRef.current) {\n      const wrapperBounds = wrapperRef.current.getBoundingClientRect();\n      const type = event.dataTransfer.getData('application/reactflow');\n      const position = project({\n        x: event.clientX - wrapperBounds.x - 80,\n        y: event.clientY - wrapperBounds.top - 20\n      });\n      const newNode = {\n        id: getId(),\n        type,\n        position,\n        data: {\n          label: `${type}`\n        }\n      };\n      nodesMap.set(newNode.id, newNode);\n    }\n  };\n\n  // We are adding a blink effect on click that we remove after 3000ms again.\n  // This should help users to see that a node was clicked by another user.\n  const onNodeClick = useCallback((_, node) => {\n    const currentNode = nodesMap.get(node.id);\n    if (currentNode) {\n      nodesMap.set(node.id, {\n        ...currentNode,\n        className: styles.blink\n      });\n    }\n    window.setTimeout(() => {\n      const currentNode = nodesMap.get(node.id);\n      if (currentNode) {\n        nodesMap.set(node.id, {\n          ...currentNode,\n          className: undefined\n        });\n      }\n    }, 3000);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.wrapper,\n    children: [/*#__PURE__*/_jsxDEV(Sidebar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.rfWrapper,\n      ref: wrapperRef,\n      children: /*#__PURE__*/_jsxDEV(ReactFlow, {\n        nodes: nodes,\n        edges: edges,\n        onEdgesChange: onEdgesChange,\n        onNodesChange: onNodesChange,\n        onNodeClick: onNodeClick,\n        onConnect: onConnect,\n        onDrop: onDrop,\n        onDragOver: onDragOver,\n        proOptions: proOptions,\n        children: /*#__PURE__*/_jsxDEV(Controls, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n}\n_s(ReactFlowPro, \"a5PnwE+PzG5d8BnXUbx85FI6/To=\", false, function () {\n  return [useNodesStateSynced, useEdgesStateSynced, useReactFlow];\n});\n_c = ReactFlowPro;\nexport default function Flow() {\n  return /*#__PURE__*/_jsxDEV(ReactFlowProvider, {\n    children: /*#__PURE__*/_jsxDEV(ReactFlowPro, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 97,\n    columnNumber: 5\n  }, this);\n}\n_c2 = Flow;\nvar _c, _c2;\n$RefreshReg$(_c, \"ReactFlowPro\");\n$RefreshReg$(_c2, \"Flow\");","map":{"version":3,"names":["React","DragEvent","useCallback","useRef","ReactFlow","Node","ReactFlowProvider","Controls","useReactFlow","Sidebar","useNodesStateSynced","nodesMap","useEdgesStateSynced","styles","proOptions","account","hideAttribution","getId","Math","random","onDragOver","event","preventDefault","dataTransfer","dropEffect","ReactFlowPro","wrapperRef","HTMLDivElement","nodes","onNodesChange","edges","onEdgesChange","onConnect","project","onDrop","current","wrapperBounds","getBoundingClientRect","type","getData","position","x","clientX","y","clientY","top","newNode","id","data","label","set","onNodeClick","_","node","currentNode","get","className","blink","window","setTimeout","undefined","wrapper","rfWrapper","Flow"],"sources":["D:/ReactFlow/my-app/src/ProDnd/ProDndFlow.js"],"sourcesContent":["import React, { DragEvent, useCallback, useRef } from 'react';\r\nimport ReactFlow, { Node, ReactFlowProvider, Controls, useReactFlow } from 'reactflow';\r\n\r\nimport Sidebar from './Sidebar';\r\nimport useNodesStateSynced, { nodesMap } from './useNodesStateSynced';\r\nimport useEdgesStateSynced from './useEdgesStateSynced';\r\n\r\nimport 'reactflow/dist/style.css';\r\nimport styles from './style.css';\r\n\r\n/**\r\n * This example shows how you can use yjs to sync the nodes and edges between multiple users.\r\n */\r\n\r\nconst proOptions = {\r\n  account: 'paid-pro',\r\n  hideAttribution: true,\r\n};\r\n\r\nconst getId = () => `dndnode_${Math.random() * 10000}`;\r\n\r\nconst onDragOver = (event: DragEvent) => {\r\n  event.preventDefault();\r\n  event.dataTransfer.dropEffect = 'move';\r\n};\r\n\r\nfunction ReactFlowPro() {\r\n  const wrapperRef = useRef<HTMLDivElement>(null);\r\n  const [nodes, onNodesChange] = useNodesStateSynced();\r\n  const [edges, onEdgesChange, onConnect] = useEdgesStateSynced();\r\n  const { project } = useReactFlow();\r\n\r\n  const onDrop = (event: DragEvent) => {\r\n    event.preventDefault();\r\n\r\n    if (wrapperRef.current) {\r\n      const wrapperBounds = wrapperRef.current.getBoundingClientRect();\r\n      const type = event.dataTransfer.getData('application/reactflow');\r\n      const position = project({ x: event.clientX - wrapperBounds.x - 80, y: event.clientY - wrapperBounds.top - 20 });\r\n      const newNode: Node = {\r\n        id: getId(),\r\n        type,\r\n        position,\r\n        data: { label: `${type}` },\r\n      };\r\n\r\n      nodesMap.set(newNode.id, newNode);\r\n    }\r\n  };\r\n\r\n  // We are adding a blink effect on click that we remove after 3000ms again.\r\n  // This should help users to see that a node was clicked by another user.\r\n  const onNodeClick = useCallback((_, node) => {\r\n    const currentNode = nodesMap.get(node.id);\r\n    if (currentNode) {\r\n      nodesMap.set(node.id, {\r\n        ...currentNode,\r\n        className: styles.blink,\r\n      });\r\n    }\r\n\r\n    window.setTimeout(() => {\r\n      const currentNode = nodesMap.get(node.id);\r\n      if (currentNode) {\r\n        nodesMap.set(node.id, {\r\n          ...currentNode,\r\n          className: undefined,\r\n        });\r\n      }\r\n    }, 3000);\r\n  }, []);\r\n\r\n  return (\r\n    <div className={styles.wrapper}>\r\n      <Sidebar />\r\n      <div className={styles.rfWrapper} ref={wrapperRef}>\r\n        <ReactFlow\r\n          nodes={nodes}\r\n          edges={edges}\r\n          onEdgesChange={onEdgesChange}\r\n          onNodesChange={onNodesChange}\r\n          onNodeClick={onNodeClick}\r\n          onConnect={onConnect}\r\n          onDrop={onDrop}\r\n          onDragOver={onDragOver}\r\n          proOptions={proOptions}\r\n        >\r\n          <Controls />\r\n        </ReactFlow>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function Flow() {\r\n  return (\r\n    <ReactFlowProvider>\r\n      <ReactFlowPro />\r\n    </ReactFlowProvider>\r\n  );\r\n}\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,WAAW,EAAEC,MAAM,QAAQ,OAAO;AAC7D,OAAOC,SAAS,IAAIC,IAAI,EAAEC,iBAAiB,EAAEC,QAAQ,EAAEC,YAAY,QAAQ,WAAW;AAEtF,OAAOC,OAAO,MAAM,WAAW;AAC/B,OAAOC,mBAAmB,IAAIC,QAAQ,QAAQ,uBAAuB;AACrE,OAAOC,mBAAmB,MAAM,uBAAuB;AAEvD,OAAO,0BAA0B;AACjC,OAAOC,MAAM,MAAM,aAAa;;AAEhC;AACA;AACA;AAFA;AAIA,MAAMC,UAAU,GAAG;EACjBC,OAAO,EAAE,UAAU;EACnBC,eAAe,EAAE;AACnB,CAAC;AAED,MAAMC,KAAK,GAAG,MAAO,WAAUC,IAAI,CAACC,MAAM,EAAE,GAAG,KAAM,EAAC;AAEtD,MAAMC,UAAU,GAAIC,KAAgB,IAAK;EACvCA,KAAK,CAACC,cAAc,EAAE;EACtBD,KAAK,CAACE,YAAY,CAACC,UAAU,GAAG,MAAM;AACxC,CAAC;AAED,SAASC,YAAY,GAAG;EAAA;EACtB,MAAMC,UAAU,GAAGvB,MAAM,GAACwB,cAAc,GAAE,IAAK;EAC/C,MAAM,CAACC,KAAK,EAAEC,aAAa,CAAC,GAAGnB,mBAAmB,EAAE;EACpD,MAAM,CAACoB,KAAK,EAAEC,aAAa,EAAEC,SAAS,CAAC,GAAGpB,mBAAmB,EAAE;EAC/D,MAAM;IAAEqB;EAAQ,CAAC,GAAGzB,YAAY,EAAE;EAElC,MAAM0B,MAAM,GAAIb,KAAgB,IAAK;IACnCA,KAAK,CAACC,cAAc,EAAE;IAEtB,IAAII,UAAU,CAACS,OAAO,EAAE;MACtB,MAAMC,aAAa,GAAGV,UAAU,CAACS,OAAO,CAACE,qBAAqB,EAAE;MAChE,MAAMC,IAAI,GAAGjB,KAAK,CAACE,YAAY,CAACgB,OAAO,CAAC,uBAAuB,CAAC;MAChE,MAAMC,QAAQ,GAAGP,OAAO,CAAC;QAAEQ,CAAC,EAAEpB,KAAK,CAACqB,OAAO,GAAGN,aAAa,CAACK,CAAC,GAAG,EAAE;QAAEE,CAAC,EAAEtB,KAAK,CAACuB,OAAO,GAAGR,aAAa,CAACS,GAAG,GAAG;MAAG,CAAC,CAAC;MAChH,MAAMC,OAAa,GAAG;QACpBC,EAAE,EAAE9B,KAAK,EAAE;QACXqB,IAAI;QACJE,QAAQ;QACRQ,IAAI,EAAE;UAAEC,KAAK,EAAG,GAAEX,IAAK;QAAE;MAC3B,CAAC;MAED3B,QAAQ,CAACuC,GAAG,CAACJ,OAAO,CAACC,EAAE,EAAED,OAAO,CAAC;IACnC;EACF,CAAC;;EAED;EACA;EACA,MAAMK,WAAW,GAAGjD,WAAW,CAAC,CAACkD,CAAC,EAAEC,IAAI,KAAK;IAC3C,MAAMC,WAAW,GAAG3C,QAAQ,CAAC4C,GAAG,CAACF,IAAI,CAACN,EAAE,CAAC;IACzC,IAAIO,WAAW,EAAE;MACf3C,QAAQ,CAACuC,GAAG,CAACG,IAAI,CAACN,EAAE,EAAE;QACpB,GAAGO,WAAW;QACdE,SAAS,EAAE3C,MAAM,CAAC4C;MACpB,CAAC,CAAC;IACJ;IAEAC,MAAM,CAACC,UAAU,CAAC,MAAM;MACtB,MAAML,WAAW,GAAG3C,QAAQ,CAAC4C,GAAG,CAACF,IAAI,CAACN,EAAE,CAAC;MACzC,IAAIO,WAAW,EAAE;QACf3C,QAAQ,CAACuC,GAAG,CAACG,IAAI,CAACN,EAAE,EAAE;UACpB,GAAGO,WAAW;UACdE,SAAS,EAAEI;QACb,CAAC,CAAC;MACJ;IACF,CAAC,EAAE,IAAI,CAAC;EACV,CAAC,EAAE,EAAE,CAAC;EAEN,oBACE;IAAK,SAAS,EAAE/C,MAAM,CAACgD,OAAQ;IAAA,wBAC7B,QAAC,OAAO;MAAA;MAAA;MAAA;IAAA,QAAG,eACX;MAAK,SAAS,EAAEhD,MAAM,CAACiD,SAAU;MAAC,GAAG,EAAEpC,UAAW;MAAA,uBAChD,QAAC,SAAS;QACR,KAAK,EAAEE,KAAM;QACb,KAAK,EAAEE,KAAM;QACb,aAAa,EAAEC,aAAc;QAC7B,aAAa,EAAEF,aAAc;QAC7B,WAAW,EAAEsB,WAAY;QACzB,SAAS,EAAEnB,SAAU;QACrB,MAAM,EAAEE,MAAO;QACf,UAAU,EAAEd,UAAW;QACvB,UAAU,EAAEN,UAAW;QAAA,uBAEvB,QAAC,QAAQ;UAAA;UAAA;UAAA;QAAA;MAAG;QAAA;QAAA;QAAA;MAAA;IACF;MAAA;MAAA;MAAA;IAAA,QACR;EAAA;IAAA;IAAA;IAAA;EAAA,QACF;AAEV;AAAC,GAlEQW,YAAY;EAAA,QAEYf,mBAAmB,EACRE,mBAAmB,EACzCJ,YAAY;AAAA;AAAA,KAJzBiB,YAAY;AAoErB,eAAe,SAASsC,IAAI,GAAG;EAC7B,oBACE,QAAC,iBAAiB;IAAA,uBAChB,QAAC,YAAY;MAAA;MAAA;MAAA;IAAA;EAAG;IAAA;IAAA;IAAA;EAAA,QACE;AAExB;AAAC,MANuBA,IAAI;AAAA;AAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}